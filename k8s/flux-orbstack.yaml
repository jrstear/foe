apiVersion: flux-framework.org/v1alpha2
kind: MiniCluster
metadata:
  name: sandia-study-cluster-local
  labels:
    cluster: local
    location: orbstack
    cost-tier: free
spec:
  # Single node for local testing (OrbStack has 1 node)
  size: 1
  
  # Number of parallel tasks
  tasks: 1
  
  # Flux container configuration
  # Using flux-restful-api which has ARM64 support
  containers:
    - image: ghcr.io/flux-framework/flux-restful-api:latest
      workingDir: /home/flux
      
      # Keep broker running for persistent use
      command: |
        echo "Flux broker starting..."
        tail -f /dev/null
      
  # Interactive mode - allows exec into pods
  interactive: true
  
  # Logging for debugging
  flux:
    logLevel: 7
